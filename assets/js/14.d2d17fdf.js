(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{225:function(t,s,a){"use strict";a.r(s);var e=a(28),n=Object(e.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("p",[t._v("计算机网络原理丶\n")]),t._v(" "),a("h1",{attrs:{id:"http协议基础"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#http协议基础"}},[t._v("#")]),t._v(" http协议基础")]),t._v(" "),a("h2",{attrs:{id:"五层模型介绍"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#五层模型介绍"}},[t._v("#")]),t._v(" 五层模型介绍")]),t._v(" "),a("h3",{attrs:{id:"网络协议分层"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#网络协议分层"}},[t._v("#")]),t._v(" 网络协议分层")]),t._v(" "),a("ul",[a("li",[t._v("应用层--http,ftp")]),t._v(" "),a("li",[t._v("传输层--TCP/IP协议,UDP")]),t._v(" "),a("li",[t._v("网络层:\t\t\t为数据在节点之间传输创立逻辑链路")]),t._v(" "),a("li",[t._v("数据链路层:\t\t在通信的实体间建立数据链路服务")]),t._v(" "),a("li",[t._v("物理层:\t\t\t定义物理设备如何传输数据")])]),t._v(" "),a("h3",{attrs:{id:"传输层tcp-ip"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#传输层tcp-ip"}},[t._v("#")]),t._v(" 传输层TCP/IP")]),t._v(" "),a("ul",[a("li",[t._v("向用户提供可靠的端到端服务")]),t._v(" "),a("li",[t._v("传输层向高层屏蔽了下层数据通信的细节")])]),t._v(" "),a("h3",{attrs:{id:"应用层"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#应用层"}},[t._v("#")]),t._v(" 应用层")]),t._v(" "),a("ul",[a("li",[t._v("为应用软件提供了很多服务")]),t._v(" "),a("li",[t._v("构建与TCP之上")]),t._v(" "),a("li",[t._v("屏蔽了网络传输相关细节")])]),t._v(" "),a("h2",{attrs:{id:"http协议的发展历史"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#http协议的发展历史"}},[t._v("#")]),t._v(" http协议的发展历史")]),t._v(" "),a("h3",{attrs:{id:"http-0-9"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#http-0-9"}},[t._v("#")]),t._v(" http/0.9")]),t._v(" "),a("ul",[a("li",[t._v("该版本极其简单，只有一个命令GET")]),t._v(" "),a("li",[t._v("没有HEADER等描述数据的信息")]),t._v(" "),a("li",[t._v("服务器发送完毕，就关闭TCP连接")]),t._v(" "),a("li",[a("code",[t._v("GET /index.html")]),t._v("命令表示，TCP 连接（connection）建立后，客户端向服务器请求（request）网页index.html。")]),t._v(" "),a("li",[t._v("协议规定，服务器只能回应HTML格式的字符串，不能回应别的格式。")])]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("<html>\n  <body>Hello World</body>\n</html>\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br")])]),a("h3",{attrs:{id:"http-1-0"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#http-1-0"}},[t._v("#")]),t._v(" http/1.0")]),t._v(" "),a("ul",[a("li",[t._v("除了GET命令，还引入了POST命令和HEAD命令")]),t._v(" "),a("li",[t._v("新增功能:处理请求的状态码"),a("code",[t._v("status code")]),t._v("、"),a("code",[t._v("header")]),t._v("发送接收数据的描述和操作")]),t._v(" "),a("li",[t._v("多字符集支持、多部分发送（multi-part type）、权限（authorization）、缓存（cache）、内容编码（content encoding）等")]),t._v(" "),a("li",[t._v("任何格式的内容都可以发送,可以传输文字，还能传输图像、视频、二进制文件")]),t._v(" "),a("li",[t._v("HTTP请求和回应的格式也变了,除了数据部分,每次通信都必须包括头信息（HTTP header,用来描述一些元数据")]),t._v(" "),a("li",[t._v("请求格式:")])]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("GET / HTTP/1.0\nUser-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_10_5)\nAccept: */*\n第一行是请求命令，必须在尾部添加协议版本（HTTP/1.0）。后面就是多行头信息，描述客户端的情况\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br")])]),a("ul",[a("li",[t._v("服务器的回应格式如下:")])]),t._v(" "),a("div",{staticClass:"language-javascript line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("HTTP")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.0")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("OK")]),t._v(" \nContent"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("Type"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" text"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("plain\nContent"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("Length"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("137582")]),t._v("\nExpires"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Thu"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("05")]),t._v(" Dec "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1997")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("16")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("00")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("00")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("GMT")]),t._v("\nLast"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("Modified"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Wed"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v(" August "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1996")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("15")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("55")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("28")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("GMT")]),t._v("\nServer"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Apache "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.84")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br")])]),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("<html>\n  <body>Hello World</body>\n</html>\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br")])]),a("ul",[a("li",[t._v('回应的格式是"头信息 + 一个空行（\\r\\n） + 数据"。其中，第一行是"协议版本 + 状态码（status code） + 状态描述"。')])]),t._v(" "),a("p",[t._v("2.4 Content-Type 字段\n关于字符的编码，1.0版规定，头信息必须是 ASCII 码，后面的数据可以是任何格式。因此，服务器回应的时候，必须告诉客户端，数据是什么格式，这就是Content-Type字段的作用。")]),t._v(" "),a("ul",[a("li",[t._v("下面是一些常见的Content-Type字段的值。")])]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("text/plain\ntext/html\ntext/css\nimage/jpeg\nimage/png\nimage/svg+xml\naudio/mp4\nvideo/mp4\napplication/javascript\napplication/pdf\napplication/zip\napplication/atom+xml\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br")])]),a("ul",[a("li",[a("p",[t._v("这些数据类型总称为MIME type，每个值包括一级类型和二级类型，之间用斜杠分隔。")])]),t._v(" "),a("li",[a("p",[t._v("除了预定义的类型，厂商也可以自定义类型。")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("application/vnd.debian.binary-package")]),t._v("上面的类型表明，发送的是Debian系统的二进制数据包。")])]),t._v(" "),a("li",[a("p",[t._v("MIME type还可以在尾部使用分号，添加参数。")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("Content-Type: text/html; charset=utf-8")]),t._v("上面的类型表明，发送的是网页，而且编码是UTF-8")])]),t._v(" "),a("li",[a("p",[t._v("客户端请求的时候，可以使用Accept字段声明自己可以接受哪些数据格式。")])]),t._v(" "),a("li",[a("p",[t._v("Accept: "),a("em",[t._v("/")])])]),t._v(" "),a("li",[a("p",[t._v("上面代码中，客户端声明自己可以接受任何格式的数据。")])]),t._v(" "),a("li",[a("p",[t._v("MIME type不仅用在HTTP协议，还可以用在其他地方，比如HTML网页。")])])]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />\n\x3c!-- 等同于 --\x3e\n<meta charset="utf-8" /> \n')])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br")])]),a("p",[t._v("2.5 Content-Encoding 字段")]),t._v(" "),a("ul",[a("li",[t._v("由于发送的数据可以是任何格式，因此可以把数据压缩后再发送。Content-Encoding字段说明数据的压缩方法。")])]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("Content-Encoding: gzip\nContent-Encoding: compress\nContent-Encoding: deflate\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br")])]),a("ul",[a("li",[t._v("客户端在请求时，用Accept-Encoding字段说明自己可以接受哪些压缩方法。\n"),a("code",[t._v("Accept-Encoding: gzip, deflate")])])]),t._v(" "),a("p",[t._v("2.6 缺点:")]),t._v(" "),a("ul",[a("li",[t._v("HTTP/1.0 版的主要缺点是，每个TCP连接只能发送一个请求。")]),t._v(" "),a("li",[t._v("发送数据完毕，连接就关闭，如果还要请求其他资源，就必须再新建一个连接。")]),t._v(" "),a("li",[t._v("TCP连接的新建成本很高，需要客户端和服务器三次握手，并且开始时发送速率较慢（slow start）。")]),t._v(" "),a("li",[t._v("所以，HTTP 1.0版本的性能比较差。随着网页加载的外部资源越来越多，这个问题就愈发突出了。")]),t._v(" "),a("li",[t._v("为了解决这个问题，有些浏览器在请求时，用了一个非标准的Connection字段。")]),t._v(" "),a("li",[a("code",[t._v("Connection: keep-alive")]),t._v("字段要求服务器不要关闭TCP连接，以便其他请求复用。")]),t._v(" "),a("li",[t._v("服务器同样回应这个字段。\n"),a("code",[t._v("Connection: keep-alive")]),t._v("一个可以复用的TCP连接就建立了，直到客户端或服务器主动关闭连接。")]),t._v(" "),a("li",[t._v("但是，这不是标准字段，不同实现的行为可能不一致，因此不是根本的解决办法。")])]),t._v(" "),a("h3",{attrs:{id:"http-1"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#http-1"}},[t._v("#")]),t._v(" http/1")]),t._v(" "),a("ul",[a("li",[t._v("持久链接")]),t._v(" "),a("li",[a("code",[t._v("pipeline")]),t._v("同个连接发送多个请求")]),t._v(" "),a("li",[t._v("服务端按序发送接收")]),t._v(" "),a("li",[t._v("增加host:可以在同一个物理服务器可以部署不同的web服务,提高效率")])]),t._v(" "),a("h3",{attrs:{id:"http-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#http-2"}},[t._v("#")]),t._v(" http/2")]),t._v(" "),a("ul",[a("li",[t._v("所有数据二进制传输")]),t._v(" "),a("li",[t._v("同一个链接里面发送多个请求不再需要按顺序,并行返回多个数据,提高传输效率")]),t._v(" "),a("li",[t._v("头信息压缩以及推送等提高效率的功能(推送服务端可以主动发送数据,请求html时可以把html中需要的css和js文件主动发送到客户端)")])]),t._v(" "),a("h2",{attrs:{id:"http三次握手"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#http三次握手"}},[t._v("#")]),t._v(" http三次握手")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("首先创建"),a("code",[t._v("TCP connection")]),t._v(" 链接客户端和服务器的连接通道一直保持")])]),t._v(" "),a("li",[a("p",[t._v("http请求和响应都是数据包")])]),t._v(" "),a("li",[a("p",[t._v("一个链接可发送多个请求")])]),t._v(" "),a("li",[a("p",[t._v("http三次握手创建了TCP链接,用于传输数据\n"),a("img",{attrs:{src:"http/http1.jpg"}})])]),t._v(" "),a("li",[a("p",[t._v("三次握手是为了防止开启无用的链接")])]),t._v(" "),a("li",[a("p",[t._v("规避延时导致的服务器开销问题")])])]),t._v(" "),a("ol",[a("li",[t._v("客户端--\x3e SYN Seq = 0 --\x3e服务端")]),t._v(" "),a("li",[t._v("服务端--\x3e SYN Seq = 0 Ack = (Seq+1) --\x3e客户端")]),t._v(" "),a("li",[t._v("客户端--\x3eAck Seq = (Ack) Ack = (Seq+1) --\x3e服务端")])]),t._v(" "),a("h2",{attrs:{id:"uri-url-urn"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#uri-url-urn"}},[t._v("#")]),t._v(" URI URL URN")]),t._v(" "),a("h3",{attrs:{id:"uri"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#uri"}},[t._v("#")]),t._v(" URI")]),t._v(" "),a("ul",[a("li",[t._v("统一资源标识符")]),t._v(" "),a("li",[t._v("用来唯一标识互联网上的信息资源")]),t._v(" "),a("li",[t._v("包括URL和URN")])]),t._v(" "),a("h3",{attrs:{id:"url"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#url"}},[t._v("#")]),t._v(" URL")]),t._v(" "),a("ul",[a("li",[t._v("统一资源定位器")]),t._v(" "),a("li",[a("code",[t._v("http://user:pass@host.com:80/path?query=string#hash")])]),t._v(" "),a("li",[a("code",[t._v("http://")]),t._v(" 通过什么协议访问服务")]),t._v(" "),a("li",[a("code",[t._v("user:pass@")]),t._v(" 特定身份访问,不常用,不安全")]),t._v(" "),a("li",[a("code",[t._v("host.com")]),t._v(" 服务器在互联网的位置")]),t._v(" "),a("li",[a("code",[t._v(":80")]),t._v(" 端口,定位host找到的服务器存放的某一个web服务器")]),t._v(" "),a("li",[a("code",[t._v("/path")]),t._v(" 路由,/代表根目录")]),t._v(" "),a("li",[a("code",[t._v("query=string")]),t._v("搜索参数")]),t._v(" "),a("li",[a("code",[t._v("hash")]),t._v(" 请求的片段,可做锚点")])]),t._v(" "),a("h3",{attrs:{id:"urn"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#urn"}},[t._v("#")]),t._v(" URN")]),t._v(" "),a("ul",[a("li",[t._v("永久统一资源定位符")]),t._v(" "),a("li",[t._v("在资源移动后还可以找到")])]),t._v(" "),a("h2",{attrs:{id:"http报文"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#http报文"}},[t._v("#")]),t._v(" HTTP报文")]),t._v(" "),a("img",{attrs:{src:"http/http2.jpg"}}),t._v("\n![](Http协议_files/1.jpg)\n请求报文\n- 首行 | GET 获取数据  地址  协议版本\n- Accept\n"),a("p",[t._v("响应报文")]),t._v(" "),a("ul",[a("li",[t._v("首行 | 协议版本 状态 状态的含义")]),t._v(" "),a("li",[t._v("首部相当于header和主体bodu之间要有一个空行")])]),t._v(" "),a("h3",{attrs:{id:"http方法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#http方法"}},[t._v("#")]),t._v(" HTTP方法")]),t._v(" "),a("ul",[a("li",[t._v("GET,POST")])]),t._v(" "),a("h3",{attrs:{id:"http-code"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#http-code"}},[t._v("#")]),t._v(" HTTP code")]),t._v(" "),a("ul",[a("li",[t._v("定义服务器对请求的处理结果")]),t._v(" "),a("li",[t._v("100-199 操作持续进行,还有操作需要完成")]),t._v(" "),a("li",[t._v("200-299 操作是成功的")]),t._v(" "),a("li",[t._v("300-399 需要传递对象,其它方式获取")]),t._v(" "),a("li",[t._v("400-499 发送的请求有问题")]),t._v(" "),a("li",[t._v("500-599 服务器的问题")])])])}),[],!1,null,null,null);s.default=n.exports}}]);